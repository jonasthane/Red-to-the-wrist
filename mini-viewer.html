<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>PDF Viewer (Continuous)</title>
<style>
  :root { --maxw: 1200px; }
  html, body { height:100%; }
  body { margin:0; background:#fff; color:#111; font-family: system-ui,-apple-system,Segoe UI,Roboto,Arial,sans-serif; }
  .wrap { max-width: var(--maxw); margin: 0 auto; }
  .toolbar {
    display:flex; align-items:center; justify-content:center; gap:12px;
    position: sticky; top:0; z-index:10; padding:10px; background:#fff; border-bottom:1px solid #e7e7e7;
  }
  button { background:#f4f4f4; color:#111; border:1px solid #ddd; padding:6px 10px; border-radius:6px; cursor:pointer; }
  .pageinfo { opacity:.8; font-size:14px; min-width:90px; text-align:center; }
  #viewer { height: 90vh; overflow:auto; -webkit-overflow-scrolling:touch; background:#fff; }
  .page { display:block; margin:0 auto; background:#fff; }
</style>
</head>
<body>
  <div class="wrap">
    <div class="toolbar">
      <button id="zoomOut" type="button" aria-label="Zoom out">−</button>
      <div class="pageinfo" id="pageInfo">Loading…</div>
      <button id="zoomIn" type="button" aria-label="Zoom in">+</button>
    </div>
    <div id="viewer"></div>
  </div>

  <script src="https://cdn.jsdelivr.net/npm/pdfjs-dist@3.11.174/build/pdf.min.js"></script>
  <script>
    pdfjsLib.GlobalWorkerOptions.workerSrc = "https://cdn.jsdelivr.net/npm/pdfjs-dist@3.11.174/build/pdf.worker.min.js";
    const PDF_URL = "https://cdn.jsdelivr.net/gh/jonasthane/Red-to-the-wrist@1667fdace2cfa0065cedb83f384b1e3f24c9a9cf/Red-to-the-wrist.pdf";

    const viewer = document.getElementById('viewer');
    const info = document.getElementById('pageInfo');
    const zoomInBtn = document.getElementById('zoomIn');
    const zoomOutBtn = document.getElementById('zoomOut');

    let pdf = null, scale = 1.0;
    const MIN = 0.6, MAX = 2.0;

    function renderAll() {
      viewer.innerHTML = "";
      const contWidth = Math.min(viewer.clientWidth, parseInt(getComputedStyle(document.documentElement).getPropertyValue('--maxw')));
      for (let i = 1; i <= pdf.numPages; i++) {
        pdf.getPage(i).then(page => {
          const base = page.getViewport({ scale: 1 });
          const fitScale = contWidth / base.width;
          const vp = page.getViewport({ scale: fitScale * scale });

          const canvas = document.createElement('canvas');
          canvas.className = "page";
          canvas.width = vp.width;
          canvas.height = vp.height;
          const ctx = canvas.getContext('2d');

          page.render({ canvasContext: ctx, viewport: vp });
          viewer.appendChild(canvas);

          info.textContent = `${pdf.numPages} pages`;
        });
      }
    }

    function zoom(delta) {
      scale = Math.max(MIN, Math.min(MAX, scale + delta));
      renderAll();
    }

    zoomInBtn.onclick = () => zoom(0.15);
    zoomOutBtn.onclick = () => zoom(-0.15);
    window.addEventListener('resize', () => renderAll());

    pdfjsLib.getDocument(PDF_URL).promise.then(doc => {
      pdf = doc;
      info.textContent = `${pdf.numPages} pages`;
      renderAll();
    }).catch(err => {
      info.textContent = "Failed to load.";
      console.error(err);
    });
  </script>
</body>
</html>
