<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>PDF Viewer</title>
  <style>
    :root { --maxw: 900px; }
    body { margin: 0; background:#111; color:#eee; font-family: system-ui, -apple-system, Segoe UI, Roboto, Arial, sans-serif; }
    .wrap { max-width: var(--maxw); margin: 0 auto; padding: 10px; }
    .toolbar { display:flex; align-items:center; gap:10px; justify-content:center;
      padding:8px 10px; background:#181818; position: sticky; top:0; z-index: 10; border-bottom:1px solid #222; }
    button { background:#2a2a2a; color:#eee; border:1px solid #333; padding:6px 10px; border-radius:6px; cursor:pointer; }
    .pageinfo { opacity:.8; font-size:14px; }
    #viewerContainer { height: 90vh; overflow:auto; -webkit-overflow-scrolling:touch; display:flex; justify-content:center; }
    canvas { background:#fff; margin:12px 0; box-shadow:0 2px 10px rgba(0,0,0,.25); }
  </style>
</head>
<body>
  <div class="wrap">
    <div class="toolbar">
      <button id="zoomOut" title="Zoom out">âˆ’</button>
      <div class="pageinfo"><span id="pageNum">1</span> / <span id="pageCount">?</span></div>
      <button id="zoomIn" title="Zoom in">+</button>
    </div>
    <div id="viewerContainer"><canvas id="pdfCanvas"></canvas></div>
  </div>

  <script src="https://cdn.jsdelivr.net/npm/pdfjs-dist@3.11.174/build/pdf.min.js"></script>
  <script>
    pdfjsLib.GlobalWorkerOptions.workerSrc = "https://cdn.jsdelivr.net/npm/pdfjs-dist@3.11.174/build/pdf.worker.min.js";

    // Use jsDelivr's raw link to your GitHub PDF
    const DEFAULT_PDF_URL = "https://cdn.jsdelivr.net/gh/jonasthane/Red-to-the-wrist@1667fdace2cfa0065cedb83f384b1e3f24c9a9cf/Red-to-the-wrist.pdf";

    const canvas = document.getElementById('pdfCanvas');
    const ctx = canvas.getContext('2d');
    const pageNumSpan = document.getElementById('pageNum');
    const pageCountSpan = document.getElementById('pageCount');
    const zoomInBtn = document.getElementById('zoomIn');
    const zoomOutBtn = document.getElementById('zoomOut');

    let pdfDoc = null, pageNum = 1, scale = 1.15;
    const MIN_SCALE = 0.6, MAX_SCALE = 3.0;

    function renderPage(num) {
      pdfDoc.getPage(num).then(function(page) {
        const viewport = page.getViewport({ scale });
        canvas.width = Math.min(viewport.width, window.innerWidth * 0.98);
        const scaleAdjust = canvas.width / viewport.width;
        const adjustedViewport = page.getViewport({ scale: scale * scaleAdjust });
        canvas.height = adjustedViewport.height;
        const renderContext = { canvasContext: ctx, viewport: adjustedViewport };
        page.render(renderContext).promise.then(() => { pageNumSpan.textContent = num; });
      });
    }
    function onZoom(delta) {
      scale = Math.min(MAX_SCALE, Math.max(MIN_SCALE, scale + delta));
      renderPage(pageNum);
    }
    zoomInBtn.addEventListener('click', () => onZoom(0.15));
    zoomOutBtn.addEventListener('click', () => onZoom(-0.15));

    pdfjsLib.getDocument(DEFAULT_PDF_URL).promise.then(function(pdf) {
      pdfDoc = pdf; pageCountSpan.textContent = pdf.numPages; renderPage(pageNum);
      const viewer = document.getElementById('viewerContainer');
      viewer.addEventListener('wheel', (e) => {
        if (e.deltaY > 0 && pageNum < pdfDoc.numPages && viewer.scrollTop + viewer.clientHeight >= viewer.scrollHeight - 5) {
          pageNum++; renderPage(pageNum);
        } else if (e.deltaY < 0 && pageNum > 1 && viewer.scrollTop <= 5) {
          pageNum--; renderPage(pageNum);
        }
      }, { passive: true });
    }).catch(err => {
      console.error(err);
      ctx.font = "16px sans-serif"; ctx.fillStyle = "#fff";
      ctx.fillText("Failed to load PDF.", 20, 30);
    });

    window.addEventListener('resize', () => renderPage(pageNum));
  </script>
</body>
</html>
